# MelBo

## **MelBo** - автоответчик для Вконтакте.
---
### Подготовка
Для предоставления доступа нужно перейти по [ссылке](https://oauth.vk.com/authorize?client_id=5468754&display=page&redirect_uri=https://vk.com&scope=messages+offline&response_type=token&v=5.64), *access_token* из адресной строки всавить в melbo.config в соответствующее поле.

Также потребуется ввести в поле my_id идентификатор своей страницы вконтакте (id).

В итоге последние строки melbo.config должны выглядеть примерно так:
```
my_id = 1
access_token = 077777764aaaf79e3331fff285cfd0f7cg8dddb93407e5f65c0a7ef49e0f87ce73ac16f233d285111116n
```

Данные неудобства предоставления доступа будут устранены в последующих обновлениях.
---
### Запуск MelBo

Для работы потребуется:
* python версии 3
* библиотеки python (скорее всего они уже установлены):
  * json
  * logging
  * http.client
  * configparser

Запуск через терминал:
```
python3 MelBo.py
```
---
### Настройка melbo.config

[optional]

Выводит **prefix** перед сообщением

    prefix = <melbo>   

По умолчанию все чаты запрещены, чтобы добавить чат в список дозволенных нужно ввести его номер в **chat_list**

    chat_list = ["43"]

Для добавления пользователя в список игнорируемых, его следует добавить в **ignore_users**

    ignore_users = ["1","1836020"]

[settings]
Время проверки новых сообщений в активном режиме (секунды)
    msg_timeout = 2
Время проверки новых сообщений в неактивном режиме (секунды)
    msg_wait = 30
Длительность активного режима (секунды)
    active_mod_max_time = 600
---
####Что такое активный режим?
Активный режим включается, когда на аккаунт, к которому подключен MelBo приходит сообщение.
Если новых сообщений нет в течение некоторого времени, MelBo переходит в менее активный режим, в котором частота проверки сообщений увеличена (по умолчанию 30 сек)

###Настройка ответов
Ответы можно настроить в файле base.json

Список сообщений для ответа находится под меткой q, а список ответов на эти сообщения находится под меткой a.

Чтобы внести в базу свой шаблон нужно вписать в нее такой блок:

```
{"q": ["сообщение", "сообщение123"],
 "a": ["еинещбоос"]}
```
Если melbo находит в полученном сообщении строку 'сообщение' или 'сообщение123', он отпрвавит в ответ 'еинещбоос'
---
Для создания нескольких блоков, их нужно перечислить через запятую:
```
{"a": [" один "],
 "q": ["два"]},
{"a": ["2*2"],
 "q": ["4", "5"]}
```

---
Стандартная база ответов была создана в ходе тестирования, ее можно полностью заменить своими шаблонами.

*В дальнейшем возможности конфигурирования базы ответов будут расширяться и дополняться*
